<div class = "container large-top-space">
    <div class = "row">
        {{#if account.disabled}}
            <div class = "failure-panel bottom-space">
                It looks like your code is no longer valid Public Mobile referral code.
                It will no longer show up on the front page, regardless of rank.
                If you've switched Public Mobile accounts, you'll have to delete this code and register a new one.
            </div>
        {{/if}}
    </div>
    <div class = "row">
        <div class = "one-half column">
            <div class = "row bottom-space">
                <span class = "large title">Hi, {{account.username}}!</span>
            </div>
            <div class = "row bottom-space">
                Your referral code is:
            </div>
            <div class = "row bottom-space">
                <span class = "large title code censored white">{{account.code}}</span>
            </div>
            <div class = "row bottom-space">
                <a href = "/logout" class = "cancel button">Log out</a>
            </div>
        </div>
        <div class = "one-half column">
            <div class = "row">
                <span class = "large title">Current Rank</span>
            </div>
            <div class = "row">
                <span class = "large code">{{rank}}</span><sup>(out of {{totalAccounts}})</sup>
                <br>
                Only the top 5 codes are visible on the front page. Keep boosting your code to stay on top!
            </div>
        </div>
    </div>
    <div class = "row">
        <div class = "one-half column">
            <div class = "row bottom-space">
                <span class = "large title">
                    Boost your code
                </span>
            </div>
            <div class = "row bottom-space">
                Displays your code on the front page for a period of time. You can only
                boost once every 12 hours.
            </div>
            <div class = "row bottom-space">
                <button id = "boostButton" class = "gold">
                    {{#if boostAllowed}}
                        Boost it!
                    {{else}}
                        Unlocks in {{cooldownRemaining}} hours
                    {{/if}}
                </button>
                <br>
                Last boost: <b>{{account.lastBoost}}</b>
            </div>
        </div>
        <div class = "one-half column">
            <div class = "row bottom-space">
                <span class = "large title">Share PMReferrals.ca</span>
            </div>
            <div class = "row bottom-space">
                Share this link with others. It takes them to the front page. 
                The more people see it, the higher your code will rank.
            </div>
            <div class = "row bottom-space">
                <span class = "code">https://pmreferrals.ca/{{account.url}}</span>
            </div>
        </div>
    </div>
    
</div>

<script>

    $('#boostButton').click(boost);
    $('#errorMessage').hide();

    function boost() {
        $("#errorMessage").hide();
        $.ajax({
        'url':'/boost',
        'method':'POST',
        'dataType': 'json',
        'contentType': 'application/json',
        'data': JSON.stringify({}),
        'processData': false,
        'success': function (data, status) {
            if (data.success) {
                window.location.href = "/account";
            }
        }
      });
    }

</script>

